<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        #dv{
            width:200px;
            height: 200px;
            background-color: pink;
            position: absolute;
            left: 50px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
<input type="button" value="移动400px" id="btn1" />
<input type="button" value="移动800px" id="btn2" />
<div id="dv"></div>
<script src="../common.js"></script>
<script>
    //  <!--方法1:存在bug-->
    //（1）给按钮btn1注册点击事件
    // my$("btn1").onclick = function () {
    //   //（2）设置定时器
    //   var timeId = setInterval(function () {
    //     //（3）获取div当前的位置
    //     var current = my$("dv").offsetLeft;
    //     //（4）设置div每次移动的步数
    //     var step = 10;
    //     current += step;
    //     //（5）判断当前移动后的位置是否到达目标位置
    //     if(current<=400){
    //       my$("dv").style.left = current + "px";
    //     }else{
    //       clearInterval(timeId);
    //     }
    //   },10);
    // };
    // my$("btn2").onclick = function () {
    //   var timeId = setInterval(function () {
    //     var current = my$("dv").offsetLeft;
    //     var step = 10;
    //     current += step;
    //     if(current<=800){
    //       my$("dv").style.left = current + "px";
    //     }else{
    //       clearInterval(timeId);
    //     }
    //   },10);
    // };

    //  <!--方法2:可以来回移动,封装动画函数-->
    function animate(element,target){
      //（1）清理定时器，保证只有一个定时器
      clearInterval(element.timeId);
      // （2）设置定时器
      element.timeId = setInterval(function () {
        //（3）获取div的当前位置
        var current = element.offsetLeft;
        //（4）设置每次移动的步数
        var step = 9;
        //（5）判断current与目标距离
        step = current < target ? step : -step;
        //（6）每次移动的距离
        current += step;
        //（7）将位置赋值给 element
        if(Math.abs(target-current) > Math.abs(step)){
          element.style.left = current + "px";
        }else{
          clearInterval(element.timeId);
          element.style.left = target + "px";
        }
      },20);
    }
    my$("btn1").onclick = function(){
      animate(my$("dv"),400);
    };
    my$("btn2").onclick = function(){
      animate(my$("dv"),800);
    };
</script>
</body>
</html>